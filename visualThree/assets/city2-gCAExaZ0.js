import{S as T,P as W,k,D,W as H,b as R,C as f,p as C,L as A,q as I,r as P,s as V,F as Y,j as J,a as y}from"./OrbitControls-DZAaySB6.js";import{G as K}from"./GLTFLoader-CW73V4hv.js";import{h as Q,i as U,o as X,a as Z}from"./index-DX-lZ6CL.js";const $={id:"home",class:"w-full h-full"},l=.001,p=1,b=.85,oe=Q({__name:"city2",setup(ee){const i=new T,g=new W(75,window.innerWidth/window.innerHeight,1,2e3);g.position.set(10,10,10),i.add(g);const z=new k(16777215,1);i.add(z);const O=new D(16777215,3);i.add(O);const m=new H;m.setSize(window.innerWidth,window.innerHeight-100);const S=new R(g,m.domElement);S.enableDamping=!0;const h=new f(2275314),w=new f(2326986),v=new f(8158333),M=new f(6645094),q=()=>{new K().load("./src/assets/glb/shanghai_city.glb",t=>{const e=t.scene,a=10;e.scale.set(a,a,a);const o=e.getObjectByName("Text_test-base_0");o&&o.parent&&o.parent.remove(o);const u=e.getObjectByName("Text_text_0");u&&u.parent&&u.parent.remove(u);const x=e.getObjectByName("02-huanqiujinrongzhongxin_huanqiujinrongzhongxin_0");x&&(x.name="hqjrzx",d(x,s(h,b),c(w,p),l));const _=e.getObjectByName("01-shanghaizhongxindasha_shanghaizhongxindasha_0");_&&(_.name="shzx",d(_,s(h,b),c(w,p),l));const j=e.getObjectByName("03-jinmaodasha_jjinmaodasha_0");j&&(j.name="jmds",d(j,s(h,b),c(w,p),l));const L=e.getObjectByName("04-dongfangmingzhu_dongfangmingzhu_0");L&&(L.name="dfmzt",d(L,s(h,b),c(w,p),l)),G(e),i.add(e),e.traverse(r=>{r.isMesh&&(r.name.indexOf("Shanghai")!==-1||r.name.indexOf("Object")!==-1)&&(r.name.indexOf("Floor")!==-1?r.material=new C({color:988184,wireframe:!0}):d(r,s(v,.8),c(M,.4),l))})})},E=n=>{const t=new J;t.expandByObject(n);const e=new y,a=new y;return t.getCenter(a),t.getSize(e),{size:e,center:a}},G=n=>{const{center:t}=E(n);n.position.copy(t.negate().setY(0))},s=(n,t=1)=>new C({color:n,transparent:!0,opacity:t}),c=(n,t=1)=>new A({color:n,depthTest:!0,transparent:!0,opacity:t}),d=(n,t,e,a=1)=>{if(n.isMesh){t&&(n.material=t);const o=N(n,a,e);o.name=n.name+"_line",n.add(o)}},N=(n,t=1,e)=>{var a=new I(n.geometry,t),o=new P(a);return e&&(o.material=e),o},F=()=>{const n=window.innerWidth,t=window.innerHeight,e=document.createElement("canvas"),a=e.getContext("2d");if(a){e.width=n,e.height=t;const o=a.createRadialGradient(n/2,t,0,n/2,t/2,Math.max(n,t));o.addColorStop(0,"#29b7cb"),o.addColorStop(.6,"#2775b6"),a.fillStyle=o,a.fillRect(0,0,e.width,e.height),i.background=new V(e),i.fog=new Y(0,0,200)}},B=()=>{m.render(i,g),requestAnimationFrame(B)};return U(()=>{document.getElementById("home").appendChild(m.domElement),q(),F(),B()}),(n,t)=>(X(),Z("div",$))}});export{oe as default};
